<script>
async function deleteProduct(productId) {
  const token = localStorage.getItem("token");
  if (!token) {
    alert("Session expired. Please login again.");
    window.location.href = "/admin/login.html";
    return;
  }

  const ok = confirm("Are you sure you want to delete this product?");
  if (!ok) return;

  const res = await fetch(`/api/admin/product/${productId}`, {
    method: "DELETE",
    headers: {
      "Authorization": "Bearer " + token
    }
  });

  if (!res.ok) {
    const msg = await res.text();
    alert("Delete failed: " + msg);
    return;
  }

  // refresh product list
  loadProducts();
}
</script>
